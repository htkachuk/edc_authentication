<html>
<head>
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
          integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css"
          integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"
            integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa"
            crossorigin="anonymous"></script>

    <script src='forge/dist/forge.min.js'></script>

    <link href="../static/css/custom.css" rel="stylesheet">
    <link rel='shortcut icon' type='image/x-icon' href='/static/images/favicon.ico'/>
</head>

<body>
<div class="container">
    <div class="row">
        <div class="col-md-6 col-md-offset-3">

            {% with messages = get_flashed_messages() %}
            {% if messages %}
            <ul class=flashes>
                {% for message in messages %}
                <font color="red">
                    <li>{{ message }}</li>
                </font>
                {% endfor %}
            </ul>
            {% endif %}
            {% endwith %}
            <div class="panel panel-login">
                <div class="panel-heading">
                    <div class="row">
                        <div class="col-xs-6">
                            <a href="/login">Login</a>
                        </div>
                        <div class="col-xs-6">
                            <a href="/register" class="active">Register</a>
                        </div>
                    </div>
                    <hr>
                </div>
                <div class="panel-body">
                    <div class="row">
                        <div class="col-lg-12">
                            <form id="register-form" action="/register" method="post" role="form">
                                <div class="form-group">
                                    <input type="text" name="username" id="username" tabindex="1" class="form-control"
                                           placeholder="Username" value="">
                                </div>
                                <div class="form-group">
                                    <input type="email" name="email" id="email" tabindex="1" class="form-control"
                                           placeholder="Email Address" value="">
                                </div>
                                <div class="form-group">
                                    <input type="password" name="password" id="password" tabindex="2"
                                           class="form-control" placeholder="Password">
                                </div>
                                <div class="form-group">
                                    <input type="password" name="confirm-password" id="confirm-password" tabindex="2"
                                           class="form-control" placeholder="Confirm Password">
                                </div>
                                <div class="form-group">
                                    <input type="hidden" name="pubKey" id="pubKey" tabindex="3"
                                           class="form-control">
                                </div>
                                <script type="text/javascript">
                                    document.addEventListener('DOMContentLoaded', function() { 
                                        var rsa = forge.pki.rsa;
                                        var password = 'Mai9ohgh6ahxee0jutheew0pungoozil';
                                        var seed = new forge.util.ByteBuffer(password, 'utf8');
                                        var keypair = rsa.generateKeyPair({seed: seed});
                                        var pki = forge.pki
                                        var pem = pki.publicKeyToPem(keypair.publicKey)
                                        var publicKey = forge.pki.publicKeyFromPem(pem);
                                        console.log(publicKey)
                                        // rsa.generateKeyPair({bits: 2048, workers: 2}, function(err, keypair) {
                                        //  // console.log(keypair.publicKey.digest().bytes())
                                        //  var pki = forge.pki;
                                        //  var pem = pki.publicKeyToPem(keypair.publicKey);
                                        //  console.log(pem)
                                        // });
                                    });
                                </script>
                                <div class="form-group">
                                    <select size="0" name="algorythm">
                                        <option>Choose an algorythm:</option>
                                        <option value="ECDSA">Elleptic Curve</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <div class="row">
                                        <div class="col-sm-6 col-sm-offset-3">
                                            <input type="submit" name="register-submit" id="register-submit"
                                                   tabindex="4" class="form-control btn btn-register"
                                                   value="Register Now">
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
                <p>
                <ol>
                    <li>
                        Usernames must be less than 20 characters
                    </li>

                    <li>
                        Passwords must contain the following:
                        <ul>
                            <li> Minimum of 8 characters.</li>
                            <li> Contain a number.</li>
                            <li> Contain upper case character.</li>
                            <li> Contain lower case character.</li>
                            <li> Contain special character.</li>
                        </ul>
                    </li>

                </ol>
                </p>
        </div>
    </div>
</div>
</body>
</html>